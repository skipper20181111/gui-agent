<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context Engineering Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
/* CORE SETUP */
* { box-sizing: border-box; }

body {
    background-color: #f1f5f9;
    color: #0f172a;
    display: grid;
    gap: 30px;
    grid-template-columns: 1fr;
    margin: 0;
    padding: 40px 0;
    place-items: center;
    font-family: 'Inter', 'Noto Sans SC', sans-serif;
}

/* SLIDE CONTAINER */
.slide-container {
    background-color: #ffffff;
    border-radius: 16px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    display: flex;
    flex-direction: column;
    min-height: 720px;
    justify-content: center;
    overflow: hidden;
    padding: 60px;
    position: relative;
    width: 1280px;
}

/* BACKGROUND ACCENTS */
.slide-container::before {
    content: '';
    position: absolute;
    top: 0; left: 0; width: 100%; height: 6px;
    background: linear-gradient(90deg, #3b82f6, #6366f1);
    z-index: 10;
}

/* TYPOGRAPHY */
h1, h2, h3 { margin: 0; font-weight: 700; color: #1e293b; letter-spacing: -0.025em; }
h1 { font-size: 64px; line-height: 1.1; margin-bottom: 20px; }
h2.slide-title { font-size: 42px; margin-bottom: 30px; border-left: 6px solid #6366f1; padding-left: 20px; }
h3 { font-size: 24px; margin-bottom: 12px; color: #334155; }
h4 { font-size: 20px; margin-bottom: 10px; color: #475569; }
p, li { font-size: 18px; line-height: 1.6; color: #475569; margin-bottom: 10px; }
.subtitle { font-size: 28px; color: #64748b; font-weight: 400; }
code, .mono { font-family: 'JetBrains Mono', monospace; background: #f1f5f9; padding: 2px 6px; border-radius: 4px; color: #0f172a; font-size: 0.9em; }

/* LAYOUTS */
.content-area { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; width: 100%; }

.two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; height: 100%; align-items: start; }
.two-column.v-center { align-items: center; }

/* SPECIFIC COMPONENTS */
.tech-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.stack-container {
    display: flex;
    flex-direction: column-reverse;
    gap: 10px;
    width: 90%;
    margin: 0 auto;
}
.stack-layer {
    padding: 12px 20px;
    text-align: center;
    color: white;
    font-weight: 600;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.stack-sys { background: #1e293b; }
.stack-mem { background: #334155; }
.stack-his { background: #475569; }
.stack-usr { background: #3b82f6; }
.stack-ex { background: #60a5fa; }
.stack-tool { background: #93c5fd; color: #1e293b; }

.code-block {
    background: #1e293b;
    color: #e2e8f0;
    padding: 20px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    line-height: 1.5;
    overflow-y: auto;
    max-height: 600px;
    position: relative;
    white-space: pre-wrap;
    border: 1px solid #334155;
}
.code-block-small { font-size: 13px; }
.code-header {
    position: absolute;
    top: 0; left: 0; right: 0;
    background: #0f172a;
    padding: 5px 15px;
    font-size: 12px;
    color: #94a3b8;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    border-bottom: 1px solid #334155;
    font-family: 'JetBrains Mono';
    display: flex;
    justify-content: space-between;
}
.code-with-header { padding-top: 35px; }

/* CHART STYLES */
.chart-container { width: 100%; padding: 20px; }
.area-chart-svg { width: 100%; height: 350px; overflow: visible; }
.area-fill { fill: rgba(99, 102, 241, 0.2); stroke: none; }
.line-stroke { fill: none; stroke: #6366f1; stroke-width: 4; stroke-linecap: round; }
.axis-labels { fill: #64748b; font-size: 16px; font-family: 'Inter', sans-serif; }
.data-point { fill: white; stroke: #6366f1; stroke-width: 3; }

/* BLEED LAYOUT */
.bleed-image-layout {
    display: grid;
    grid-template-columns: 45% 55%;
    padding: 0;
    gap: 0;
    align-items: start;
}
.bleed-content { padding: 50px; display: flex; flex-direction: column; justify-content: center; height: 100%; }
.bleed-image-container { height: 100%; width: 100%; overflow: hidden; background: #f8fafc; border-left: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: center; padding: 40px; }
.bleed-image { width: 100%; height: 100%; object-fit: cover; max-height: 720px; }

/* TILES */
.tiled-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; width: 100%; }
.tile-item { background: #f8fafc; padding: 25px; border-radius: 12px; border-left: 4px solid #3b82f6; }
.tile-item i { color: #3b82f6; font-size: 24px; margin-bottom: 15px; display: block; }

/* LISTS */
ul.feature-list { list-style: none; padding: 0; }
ul.feature-list li { position: relative; padding-left: 24px; margin-bottom: 12px; }
ul.feature-list li::before {
    content: '•'; color: #3b82f6; font-size: 24px; position: absolute; left: 0; top: -3px;
}
ul.cross-list li::before { content: '×'; color: #ef4444; font-weight: bold; }
ul.check-list li::before { content: '✓'; color: #22c55e; font-weight: bold; }

/* CALLOUT */
.callout {
    background: #fffbeb;
    border-left: 4px solid #f59e0b;
    padding: 15px;
    border-radius: 4px;
    font-size: 16px;
    color: #92400e;
    margin-top: 15px;
}
.callout-blue {
    background: #eff6ff;
    border-left: 4px solid #3b82f6;
    padding: 15px;
    border-radius: 4px;
    font-size: 16px;
    color: #1e40af;
    margin-top: 15px;
}

/* TABLE */
.simple-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 16px;
    margin-top: 15px;
}
.simple-table th, .simple-table td {
    border: 1px solid #e2e8f0;
    padding: 12px 15px;
    text-align: left;
}
.simple-table th {
    background: #f8fafc;
    font-weight: 600;
    color: #334155;
}
.simple-table td { color: #475569; }

/* TOC */
.toc-list {
    list-style: none;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px 40px;
}
.toc-list li {
    font-size: 20px;
    padding: 10px 0;
    border-bottom: 1px solid #e2e8f0;
    color: #334155;
}
.toc-list li span { color: #6366f1; font-weight: 700; margin-right: 12px; }

</style>
</head>
<body>

<!-- ==================== Slide 1: 封面页 ==================== -->
<div class="slide-container" id="slide1">
    <div style="text-align: center; max-width: 900px; margin: 0 auto; z-index: 2;">
        <span style="background: #e0e7ff; color: #4338ca; padding: 8px 16px; border-radius: 20px; font-weight: 600; font-size: 16px; margin-bottom: 20px; display: inline-block;">Context Engineering 入门</span>
        <h1>Context Engineering<br><span style="color: #6366f1;">构建大模型工作环境的艺术</span></h1>
        <p class="subtitle" style="margin-top: 30px;">宋睿 ｜ 数据智能部 ｜ 2025年12月</p>
    </div>
</div>

<!-- ==================== Slide 2: 目录 ==================== -->
<div class="slide-container" id="slide2">
    <h2 class="slide-title">目录</h2>
    <div class="content-area">
        <ul class="toc-list">
            <li><span>1</span>为什么需要 Context Engineering</li>
            <li><span>2</span>大模型的工作原理</li>
            <li><span>3</span>模型的局限性（遗忘机制）</li>
            <li><span>4</span>什么是 Context Engineering</li>
            <li><span>5</span>Context 的关键组成</li>
            <li><span>6</span>CE 六大核心方法</li>
            <li><span>7</span>常见错误</li>
            <li><span>8</span>工具调用中的 CE</li>
            <li><span>9</span>如何在工作中落地</li>
        </ul>
    </div>
</div>

<!-- ==================== Slide 3: 为什么需要 CE ==================== -->
<div class="slide-container" id="slide3">
    <h2 class="slide-title">1. 为什么需要 Context Engineering？</h2>
    <div class="content-area">
        <div class="two-column v-center">
            <div>
                <h3 style="color: #6366f1;">根本原因</h3>
                <ul class="feature-list" style="font-size: 20px;">
                    <li><strong>大模型不是"思考机器"</strong><br>它是<strong>依赖输入的文字接龙机器</strong></li>
                    <li><strong>推理时参数固定</strong><br>不会学习、不会更新权重</li>
                    <li><strong>输入(Context) 是唯一</strong><br>决定它表现好坏的因素</li>
                </ul>
                <h3 style="color: #6366f1; margin-top: 25px;">关键事实</h3>
                <ul class="feature-list" style="font-size: 18px;">
                    <li>输入质量决定输出质量（Garbage In → Garbage Out）</li>
                    <li>上下文越长，性能越差：遗忘、注意力衰减</li>
                </ul>
                <div class="callout-blue">
                    <strong>一句话总结：</strong> Context Engineering = 帮模型打造一个能把事情做好的工作环境
                </div>
            </div>
            <div style="background: #f1f5f9; padding: 30px; border-radius: 12px; text-align: center;">
                <p style="font-weight: bold; font-size: 22px; color: #334155; margin-bottom: 20px;">模型本质：依赖输入的文字接龙机器</p>
                <div style="font-family: 'JetBrains Mono'; color: #64748b; font-size: 18px; line-height: 2;">
                    输入质量 → 输出质量<br>
                    ↓<br>
                    参数冻结 → 无法学习<br>
                    ↓<br>
                    Context = 唯一控制手段
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 4: 大模型如何工作 ==================== -->
<div class="slide-container" id="slide4">
    <h2 class="slide-title">2. 大模型如何工作（入门原理）</h2>
    <div class="content-area">
        <div class="two-column v-center">
            <div>
                <div class="callout-blue" style="margin-bottom: 25px;">
                    大模型只是一个做<strong>文字接龙</strong>的工具，"当前一步输出的 token"只能使用"上下文窗口"的信息。
                </div>
                <h3 style="color: #6366f1;">核心特征</h3>
                <ul class="feature-list" style="font-size: 18px;">
                    <li><strong>模型不会更新权重</strong><br>推理时参数是冻结的</li>
                    <li><strong>只能被动根据输入推理</strong><br>推理 = 做文字接龙</li>
                    <li><strong>注意力随距离衰减</strong><br>距离越远，影响越弱</li>
                    <li><strong>格式化输出首选 JSON</strong><br>训练强化最多、语法最简、错误率最低</li>
                </ul>
                <div class="callout">
                    <strong>关键：</strong> 你给它什么，它就只能用什么。你的输入，就是它全部的"世界"。
                </div>
            </div>
            <div style="background: #f1f5f9; padding: 30px; border-radius: 12px; text-align: center;">
                <p style="font-weight: bold; font-size: 22px; color: #334155; margin-bottom: 20px;">模型工作原理：文字接龙</p>
                <div style="font-family: 'JetBrains Mono'; color: #64748b; font-size: 18px; line-height: 2.2;">
                    输入: [A, B, C] <br>
                    ↓ <br>
                    预测: D (基于 A,B,C)<br>
                    ↓ <br>
                    新输入: [A, B, C, D]<br>
                    ↓ <br>
                    预测: E (基于 A,B,C,D)<br>
                    ↓ <br>
                    ...
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 5: 模型的局限性 ==================== -->
<div class="slide-container" id="slide5" style="padding: 40px 60px;">
    <h2 class="slide-title" style="margin-bottom: 20px;">3. 模型的局限性（CE 的科学依据）</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <!-- 上方：精简文字说明 -->
        <div style="display: flex; gap: 20px; margin-bottom: 25px;">
            <div style="flex: 1; background: #fef2f2; padding: 12px 15px; border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #dc2626; font-size: 14px;">3.1 上下文是有限资源</strong>
                <p style="margin: 5px 0 0; font-size: 13px; color: #7f1d1d;">200k token ≠ 200k 有效信息，越长越不准</p>
            </div>
            <div style="flex: 1; background: #fef2f2; padding: 12px 15px; border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #dc2626; font-size: 14px;">3.2 注意力衰减</strong>
                <p style="margin: 5px 0 0; font-size: 13px; color: #7f1d1d;">距离越远，影响越弱</p>
            </div>
            <div style="flex: 1; background: #fef2f2; padding: 12px 15px; border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #dc2626; font-size: 14px;">3.3 Lost in the Middle</strong>
                <p style="margin: 5px 0 0; font-size: 13px; color: #7f1d1d;">开头最好，中间最差，结尾次之</p>
            </div>
            <div style="flex: 1; background: #fef2f2; padding: 12px 15px; border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #dc2626; font-size: 14px;">3.4 模型不能训练自己</strong>
                <p style="margin: 5px 0 0; font-size: 13px; color: #7f1d1d;">推理时冻结，唯一控制 = 输入</p>
            </div>
        </div>
        <!-- 下方：两张大图并排 -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; flex: 1;">
            <!-- 图1: 上下文长度与准确率 -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 12px; display: flex; flex-direction: column; align-items: center;">
                <img src="component/image.png" alt="LLM长上下文RAG性能" style="width: 100%; max-height: 340px; object-fit: contain; border-radius: 8px;">
                <p style="font-size: 14px; color: #64748b; margin-top: 12px; text-align: center;">
                    图1：LLM 长上下文 RAG 性能<br>
                    <strong style="color: #ef4444;">即使最好情况也有 20% 错误</strong>
                </p>
            </div>
            <!-- 图2: Lost in the Middle -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 12px; display: flex; flex-direction: column;">
                <p style="text-align: center; font-weight: 600; color: #334155; margin-bottom: 15px; font-size: 16px;">图2：Lost in the Middle 效应</p>
                <div style="flex: 1; display: flex; align-items: center;">
                    <svg viewBox="0 0 500 280" style="width: 100%; height: 100%;">
                        <defs>
                            <linearGradient id="decay-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#6366f1;stop-opacity:0.5" />
                                <stop offset="100%" style="stop-color:#6366f1;stop-opacity:0.05" />
                            </linearGradient>
                        </defs>
                        <!-- 坐标轴 -->
                        <line x1="50" y1="220" x2="470" y2="220" stroke="#cbd5e1" stroke-width="2"/>
                        <line x1="50" y1="40" x2="50" y2="220" stroke="#cbd5e1" stroke-width="2"/>
                        <!-- 填充区域 -->
                        <path d="M 50 60 Q 150 180 260 190 T 470 80 V 220 H 50 Z" fill="url(#decay-gradient)"/>
                        <!-- 曲线 -->
                        <path d="M 50 60 Q 150 180 260 190 T 470 80" fill="none" stroke="#6366f1" stroke-width="4" stroke-linecap="round"/>
                        <!-- 数据点 -->
                        <circle cx="50" cy="60" r="8" fill="white" stroke="#22c55e" stroke-width="3"/>
                        <circle cx="260" cy="190" r="8" fill="white" stroke="#ef4444" stroke-width="3"/>
                        <circle cx="470" cy="80" r="8" fill="white" stroke="#3b82f6" stroke-width="3"/>
                        <!-- X轴标签 -->
                        <text x="50" y="250" style="font-size: 16px; fill: #22c55e; font-weight: 600;">开头（最好）</text>
                        <text x="210" y="250" style="font-size: 16px; fill: #ef4444; font-weight: 600;">中间（最差）</text>
                        <text x="400" y="250" style="font-size: 16px; fill: #3b82f6; font-weight: 600;">结尾（次之）</text>
                        <!-- Y轴标签 -->
                        <text x="60" y="55" style="font-size: 14px; fill: #6366f1; font-weight: 600;">准确率</text>
                    </svg>
                </div>
                <p style="font-size: 14px; color: #64748b; text-align: center; margin-top: 10px;">
                    <strong style="color: #ef4444;">重要信息不要放在中间！</strong>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 6: 什么是 CE ==================== -->
<div class="slide-container" id="slide6">
    <h2 class="slide-title">4. 什么是 Context Engineering？</h2>
    <div class="content-area">
        <div class="two-column v-center">
            <div>
                <h3 style="color: #6366f1;">一句话定义</h3>
                <div class="callout-blue" style="font-size: 18px; margin-bottom: 30px;">
                    通过设计输入结构、内容与顺序，让大模型在固定参数下表现更好的一门工程方法。
                </div>
                <h3 style="color: #6366f1;">五大目标</h3>
                <ul class="feature-list" style="font-size: 18px;">
                    <li><strong>减少信息遗忘</strong></li>
                    <li><strong>提高输出结果的稳定性和风格一致性</strong><br>（比如输出 JSON 格式，而不是自由文本）</li>
                    <li><strong>提升关键指令的描述清晰度</strong><br>使模型可以按照你的意图输出</li>
                    <li><strong>强化工具调用</strong></li>
                    <li><strong>控制 Agent 行为（Alignment）</strong></li>
                </ul>
            </div>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 50px; border-radius: 20px; text-align: center;">
                <i class="fa-solid fa-layer-group" style="font-size: 80px; color: white; margin-bottom: 25px;"></i>
                <p style="color: white; font-size: 24px; font-weight: 700; margin: 0;">你不是在写 Prompt</p>
                <p style="color: rgba(255,255,255,0.9); font-size: 20px; margin-top: 15px;">你是在设计模型的<br><strong style="font-size: 28px;">工作环境</strong></p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 7: Context 组成结构 ==================== -->
<div class="slide-container" id="slide7">
    <h2 class="slide-title">5. Context 的组成结构</h2>
    <div class="content-area">
        <div class="two-column v-center">
            <div>
                <p>Context 不是一句话，而是六大模块的组合：</p>
                <table class="simple-table" style="font-size: 15px;">
                    <tr><th>模块</th><th>说明</th></tr>
                    <tr><td><strong>System Prompt</strong></td><td>身份、规则、风格</td></tr>
                    <tr><td><strong>Memory</strong></td><td>长期记忆（可放在 System Prompt 或 History 中）</td></tr>
                    <tr><td><strong>Conversation History</strong></td><td>对话历史</td></tr>
                    <tr><td><strong>User Prompt</strong></td><td>当前的输入内容</td></tr>
                    <tr><td><strong>Examples</strong></td><td>Few-shot 示例（通常放在 User Prompt 中）</td></tr>
                    <tr><td><strong>Tool Instructions</strong></td><td>工具规范（模型的工具调用说明）</td></tr>
                </table>
                <div class="callout-blue" style="margin-top: 20px;">
                    <strong>核心原则：</strong> 结构化 + 明确职责 → 模型行为更稳定
                </div>
            </div>
            <div style="background: #f8fafc; padding: 30px; border-radius: 20px; border: 1px dashed #cbd5e1;">
                <div class="stack-container">
                    <div class="stack-layer stack-sys">System Prompt (Identity)</div>
                    <div class="stack-layer stack-mem">Long-term Memory</div>
                    <div class="stack-layer stack-his">Conversation History</div>
                    <div class="stack-layer stack-ex">Few-Shot Examples</div>
                    <div class="stack-layer stack-usr">User Prompt (Current Task)</div>
                    <div class="stack-layer stack-tool">Tool Instructions</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 8: 示例一 - Agentic 场景 ==================== -->
<div class="slide-container" id="slide8" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 36px;">示例一：Agentic 场景（工具调用 + 自然语言回复）</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <div class="code-block code-with-header code-block-small" style="max-height: 520px;">
            <div class="code-header"><span>POST /v1/chat/completions</span><span>curl 请求示例</span></div>
curl --location 'https://api.example.com/v1/chat/completions' \
--header 'Authorization: Bearer sk-xxxxx' \
--header 'Content-Type: application/json' \
--data '{
    "model": "claude-sonnet-4-5-20250929",
    "stream": true,
    "messages": [
        {
            "role": "system",
            "content": "【身份】你是一个专业的数据分析助手，可以查询数据库并发送报告。\n【规则】1. 必须用中文回复 2. 先分析再给建议 3. 不得虚构数据\n【风格】简洁专业，先给结论再展开\n\n【长期记忆】用户偏好：喜欢用表格展示数据，习惯先看结论再看分析过程。"
        },
        {"role": "user", "content": "帮我查一下上个月华东区的销售数据"},
        {
            "role": "assistant",
            "content": "好的，我来查询华东区上月的销售数据。",
            "tool_calls": [{"id": "call_1", "type": "function", "function": {"name": "query_database", "arguments": "{\"region\":\"华东\",\"start_date\":\"2025-10-01\",\"end_date\":\"2025-10-31\"}"}}]
        },
        {"role": "tool", "tool_call_id": "call_1", "content": "{\"total_sales\": 980000, \"top_customers\": [{\"name\": \"A公司\", \"amount\": 400000}]}"},
        {"role": "assistant", "content": "华东区上月销售额为98万元，最大客户是A公司（40万）。整体表现良好，建议继续维护A公司关系。"},
        {"role": "user", "content": "帮我分析本月数据，并把报告发给老板"}
    ],
    "tools": [
        {"type": "function", "function": {"name": "query_database", "description": "查询销售数据库，获取指定区域和时间范围的销售数据", "parameters": {"type": "object", "properties": {"region": {"type": "string", "description": "区域名称"}, "start_date": {"type": "string", "description": "开始日期"}, "end_date": {"type": "string", "description": "结束日期"}}, "required": ["region", "start_date", "end_date"]}}},
        {"type": "function", "function": {"name": "send_report", "description": "将分析报告发送给指定人员", "parameters": {"type": "object", "properties": {"recipient": {"type": "string"}, "report_content": {"type": "string"}}, "required": ["recipient", "report_content"]}}}
    ]
}'</div>
        <table class="simple-table" style="font-size: 14px; margin-top: 15px;">
            <tr><th>Context 模块</th><th>请求中的位置</th></tr>
            <tr><td>System Prompt</td><td>messages[0]（身份+规则+风格）</td></tr>
            <tr><td>Memory</td><td>嵌入在 System Prompt 中的"长期记忆"</td></tr>
            <tr><td>Conversation History</td><td>messages[1-4]（之前的问答+工具调用）</td></tr>
            <tr><td>User Prompt</td><td>messages[5]（当前任务）</td></tr>
            <tr><td>Tool Instructions</td><td>tools 数组（两个工具定义）</td></tr>
        </table>
    </div>
</div>

<!-- ==================== Slide 9: 示例二 - JSON 结构化输出 ==================== -->
<div class="slide-container" id="slide9" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 36px;">示例二：信息提取场景（JSON 结构化输出 + Few-shot）</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <div class="two-column" style="gap: 30px;">
            <div class="code-block code-with-header code-block-small" style="max-height: 480px;">
                <div class="code-header"><span>POST /v1/chat/completions</span><span>curl 请求</span></div>
curl --location 'https://api.example.com/v1/chat/completions' \
--data '{
    "model": "claude-sonnet-4-5-20250929",
    "messages": [
        {
            "role": "system",
            "content": "【身份】你是一个合同信息提取助手。\n\n【任务】从合同文本中提取关键信息，严格按照JSON格式输出。\n\n【输出字段定义】\n{\n  \"party_a\": \"甲方公司全称\",\n  \"party_b\": \"乙方公司全称\",\n  \"contract_type\": \"合同类型，枚举值：采购/销售/服务/租赁\",\n  \"amount\": \"合同金额（数字，单位：元）\",\n  \"start_date\": \"生效日期（YYYY-MM-DD）\",\n  \"end_date\": \"到期日期（YYYY-MM-DD）\",\n  \"key_terms\": \"关键条款摘要（数组，最多3条）\"\n}\n\n【规则】\n1. 只输出JSON，不要有其他文字\n2. 金额统一转换为数字\n3. 如字段缺失，填null"
        },
        {"role": "user", "content": "本采购合同由北京科技有限公司（甲方）与上海贸易有限公司（乙方）签订，合同金额50万元，有效期2025年1月1日至2025年12月31日。付款方式为货到付款，违约金为合同金额的10%。"},
        {"role": "assistant", "content": "{\"party_a\":\"北京科技有限公司\",\"party_b\":\"上海贸易有限公司\",\"contract_type\":\"采购\",\"amount\":500000,\"start_date\":\"2025-01-01\",\"end_date\":\"2025-12-31\",\"key_terms\":[\"货到付款\",\"违约金10%\"]}"},
        {"role": "user", "content": "本服务合同由深圳创新科技集团有限公司（甲方）与杭州数据服务有限公司（乙方）于2025年6月15日签订。甲方委托乙方提供为期两年的数据分析服务，服务期限自2025年7月1日起至2027年6月30日止。合同总金额为人民币壹佰贰拾万元整（¥1,200,000）。付款方式：按季度支付，每季度支付30万元。保密条款：乙方对甲方数据负有保密义务，期限为合同终止后3年。"}
    ]
}'</div>
            <div>
                <table class="simple-table" style="font-size: 14px; margin-bottom: 15px;">
                    <tr><th>Context 模块</th><th>位置</th></tr>
                    <tr><td>System Prompt</td><td>messages[0]（身份+任务+字段定义+规则）</td></tr>
                    <tr><td>Examples (Few-shot)</td><td>messages[1-2]（一组完整的输入→输出示例）</td></tr>
                    <tr><td>User Prompt</td><td>messages[3]（待提取的合同文本）</td></tr>
                </table>
                <p style="font-size: 14px; color: #334155; font-weight: 600;">预期输出：</p>
                <div class="code-block" style="font-size: 14px; max-height: 200px;">
{
  "party_a": "深圳创新科技集团有限公司",
  "party_b": "杭州数据服务有限公司",
  "contract_type": "服务",
  "amount": 1200000,
  "start_date": "2025-07-01",
  "end_date": "2027-06-30",
  "key_terms": ["按季度支付30万元", "保密义务3年"]
}</div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 10: 六大方法 - 概览 ==================== -->
<div class="slide-container" id="slide10">
    <h2 class="slide-title">6. Context Engineering 六大方法</h2>
    <div class="content-area">
        <div class="tiled-grid" style="grid-template-columns: repeat(3, 1fr); gap: 25px;">
            <div class="tile-item">
                <i class="fa-solid fa-compress"></i>
                <h3 style="font-size: 20px;">6.1 压缩上下文</h3>
                <p style="font-size: 15px;">对话过长时生成"交接文档"，保留核心状态</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-sitemap"></i>
                <h3 style="font-size: 20px;">6.2 上下文结构化</h3>
                <p style="font-size: 15px;">用固定格式和标签组织输入，消除歧义</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-users"></i>
                <h3 style="font-size: 20px;">6.3 多智能体</h3>
                <p style="font-size: 15px;">独立任务、独立上下文，避免"大杂烩"</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-database"></i>
                <h3 style="font-size: 20px;">6.4 RAG 向量检索</h3>
                <p style="font-size: 15px;">检索 → 重排序 → 只给相关片段</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-folder-tree"></i>
                <h3 style="font-size: 20px;">6.5 RAG 多层目录</h3>
                <p style="font-size: 15px;">类别 → 目录 → 概要 → 内容 → 深度检索</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-list-check"></i>
                <h3 style="font-size: 20px;">6.6 示例驱动</h3>
                <p style="font-size: 15px;">用高质量正面示例替代抽象描述</p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 11: 方法1 - 压缩上下文 ==================== -->
<div class="slide-container bleed-image-layout" id="slide11">
    <div class="bleed-content">
        <h2 class="slide-title" style="font-size: 32px;">6.1 压缩上下文</h2>
        <p><strong>目的：</strong>当对话过长时，让模型总结关键信息，丢弃冗余内容，保留继续工作所需的核心上下文。</p>
        <p><strong>核心原则：</strong>宁可多写细节，也不要遗漏关键信息。</p>
        <p style="font-size: 15px; color: #64748b;">将这份"交接文档"作为新会话的 System Prompt 或开场白。</p>
        <div class="callout" style="font-size: 15px;">
            像给接手的同事写交接文档一样，确保他不用问问题就能继续。
        </div>
    </div>
    <div class="bleed-image-container" style="background: #1e293b; padding: 0; align-items: flex-start;">
        <div class="code-block" style="width: 100%; height: 100%; border: none; border-radius: 0; padding: 30px; font-size: 15px;">
<span style="color: #94a3b8;">// 压缩摘要提示词模板（5个必备模块）</span>
请总结当前对话，生成一份"交接文档"，确保后续对话能无缝继续。

## 1. 当前状态
- 用户的原始需求是什么
- 已完成的工作
- 正在进行的工作
- 待完成的具体步骤

## 2. 关键文件
- 已修改的文件及改动说明
- 已分析的文件及其作用
- 待修改的文件

## 3. 技术决策
- 采用的方案及原因
- 使用的技术栈/框架
- 成功的命令 vs 失败的尝试

## 4. 策略与风险
- 整体思路
- 已发现的坑点
- 潜在风险

## 5. 下一步行动（必须具体）
❌ 错误：实现用户认证
✅ 正确：
1. 在 src/auth.js 第15行添加JWT中间件
2. 修改 src/login.js 第45行返回token
3. 运行 npm test 验证

要求：像给接手的同事写交接文档一样，确保他不用问问题就能继续。</div>
    </div>
</div>

<!-- ==================== Slide 12: 方法2 - 上下文结构化 ==================== -->
<div class="slide-container" id="slide12" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">6.2 上下文结构化</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <p><strong>核心思想：</strong>用固定的格式和标签组织输入，让模型一眼就能分辨"这是什么类型的信息"。</p>
        <table class="simple-table" style="font-size: 14px; margin: 15px 0; width: auto;">
            <tr><th>方式</th><th>示例</th></tr>
            <tr><td>中文标签</td><td><code>【任务】</code>、<code>【规则】</code>、<code>【数据】</code></td></tr>
            <tr><td>XML 标签</td><td><code>&lt;task&gt;</code>、<code>&lt;rules&gt;</code>、<code>&lt;context&gt;</code></td></tr>
            <tr><td>Markdown</td><td><code>## 任务</code>、<code>- 条目1</code></td></tr>
        </table>
        <div class="two-column" style="gap: 25px;">
            <div class="code-block code-with-header" style="max-height: 400px; font-size: 14px;">
                <div class="code-header"><span>❌ 无结构（模糊）</span></div>
帮我写一个用户注册接口的API文档，POST请求，
路径是/api/v1/user/register，
参数有username、password、email。</div>
            <div class="code-block code-with-header" style="max-height: 400px; font-size: 14px;">
                <div class="code-header"><span>✅ 有结构（清晰）</span></div>
【任务】根据接口信息编写 API 文档

【输出格式要求】
1. 使用 Markdown 格式
2. 包含：接口说明、请求参数表格、请求示例（curl）、成功响应、错误响应
3. 参数表格列：字段名、类型、必填、说明
4. 错误响应需列出常见情况

【Few-shot 示例】
输入：GET /api/v1/user/info，参数：user_id（用户ID）
输出：
## 获取用户信息
**请求方式**：GET
**请求路径**：/api/v1/user/info
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| user_id | string | 是 | 用户唯一标识 |
...

【待处理接口】
POST /api/v1/user/register
参数：username（用户名，3-20位）、password（密码，至少8位）、email（邮箱）</div>
        </div>
        <div style="margin-top: 15px; display: flex; gap: 20px;">
            <div style="flex: 1; background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid #22c55e;">
                <strong style="color: #15803d;">为什么有效？</strong>
                <ul style="margin: 10px 0 0 0; padding-left: 20px; font-size: 14px;">
                    <li>模型的注意力更容易"锚定"到结构化标签</li>
                    <li>减少歧义——不会把"规则"误解为"数据"</li>
                    <li>便于复用——同一模板可套用到不同接口</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 13: 方法3 - 多智能体 ==================== -->
<div class="slide-container" id="slide13" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">6.3 多智能体（Multi-Agent）</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <p>每个 Agent 拥有独立的任务 Prompt，并且可以调用工具。多 Agent 之间<strong>不共享上下文</strong>，只将最终结果合并给 Master-Agent。</p>
        <div class="callout" style="margin: 15px 0;">
            <strong>为什么需要？</strong> 单一上下文太长会导致遗忘和降智；不同子任务需要不同的专业视角和规则；并行处理可以提高效率。
        </div>
        <p style="font-size: 16px; font-weight: 600; color: #334155;">示例：竞品分析报告</p>
        <div class="code-block" style="font-size: 15px; max-height: 180px; margin-bottom: 15px;">
用户需求：分析竞品X，生成完整的竞品分析报告

┌─────────────────────────────────────────────────────────┐
│                    Master-Agent                          │
│  任务：汇总各Agent结果，生成结构化的竞品分析报告          │
└─────────────────────────────────────────────────────────┘
                            ▲
          ┌─────────────────┼─────────────────┐
          │                 │                 │
    ┌─────┴─────┐    ┌─────┴─────┐    ┌─────┴─────┐
    │ Agent-A   │    │ Agent-B   │    │ Agent-C   │
    │ 产品功能  │    │ 技术架构  │    │ 市场定位  │
    │ 分析师    │    │ 分析师    │    │ 分析师    │
    └───────────┘    └───────────┘    └───────────┘</div>
        <table class="simple-table" style="font-size: 13px;">
            <tr><th>Agent</th><th>System Prompt 要点</th><th>可用工具</th></tr>
            <tr><td>Agent-A</td><td>你是产品分析师，专注于功能对比、用户体验、产品迭代</td><td>网页搜索、产品文档解析</td></tr>
            <tr><td>Agent-B</td><td>你是技术分析师，专注于技术栈、架构设计、性能指标</td><td>GitHub搜索、技术博客检索</td></tr>
            <tr><td>Agent-C</td><td>你是市场分析师，专注于定价、目标用户、市场份额</td><td>行业报告检索、新闻搜索</td></tr>
            <tr><td>Master</td><td>你是报告整合者，将各维度分析汇总成结构化报告</td><td>无（只做汇总）</td></tr>
        </table>
        <p style="text-align: center; margin-top: 15px; font-size: 15px; color: #6366f1; font-weight: 600;">优势：每个 Agent 的上下文只包含自己领域的信息，不会被其他领域的内容干扰，专注度更高。</p>
    </div>
</div>

<!-- ==================== Slide 14: 方法4 - RAG 向量检索 ==================== -->
<div class="slide-container" id="slide14" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">6.4 RAG Embedding 外部知识库检索</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <p><strong>核心思想：</strong>不把整本书塞给模型，通过 <strong>检索 → Rerank → 小上下文</strong> 的方式提供相关信息。</p>
        <div class="two-column" style="gap: 30px; margin-top: 15px;">
            <div>
                <div class="code-block" style="font-size: 14px; max-height: 280px;">
用户问题："公司的年假政策是什么？"
        │
        ▼
┌───────────────────┐
│  1. 向量化查询     │  将问题转为向量
└─────────┬─────────┘
          ▼
┌───────────────────┐
│  2. 向量检索       │  从知识库召回 Top-K 相关文档
└─────────┬─────────┘
          ▼
┌───────────────────┐
│  3. Rerank 重排序  │  用交叉编码器精排，筛选最相关的
└─────────┬─────────┘
          ▼
┌───────────────────┐
│  4. 构建 Prompt    │  将检索结果 + 问题 组装成 Prompt
└─────────┬─────────┘
          ▼
┌───────────────────┐
│  5. LLM 生成回答   │  基于检索内容回答问题
└───────────────────┘</div>
                <p style="font-size: 14px; margin-top: 15px;"><strong>Step 1-2: 向量检索召回 Top-5</strong></p>
                <table class="simple-table" style="font-size: 14px;">
                    <tr><th>排名</th><th>文档片段</th><th>相似度</th></tr>
                    <tr><td>1</td><td>员工入职满一年后，享有5天带薪年假...</td><td>0.89</td></tr>
                    <tr><td>2</td><td>年假需提前3个工作日申请...</td><td>0.85</td></tr>
                    <tr><td>3</td><td>病假需提供医院证明...</td><td>0.72</td></tr>
                </table>
            </div>
            <div>
                <p style="font-size: 14px;"><strong>Step 3: Rerank 后保留 Top-2</strong>（筛选掉不相关的）</p>
                <p style="font-size: 14px;"><strong>Step 4: RAG Prompt</strong></p>
                <div class="code-block" style="font-size: 14px; max-height: 320px;">
【系统指令】
你是公司HR助手，根据提供的知识库内容回答员工问题。

【规则】
1. 只能基于【参考资料】中的内容回答，不得编造
2. 如果参考资料不足以回答问题，请明确说明"根据现有资料无法回答"
3. 回答要简洁，引用具体条款

【参考资料】
&lt;doc id="1"&gt;
员工入职满一年后，享有5天带薪年假，满3年10天，满5年15天。
&lt;/doc&gt;
&lt;doc id="2"&gt;
年假需提前3个工作日申请，经直属领导批准后生效，未休年假不可跨年累积。
&lt;/doc&gt;

【用户问题】
公司的年假政策是什么？</div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 15: RAG 预期输出 ==================== -->
<div class="slide-container" id="slide15" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">6.4 RAG 预期输出示例</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <div class="two-column" style="gap: 40px;">
            <div>
                <p style="font-size: 16px; font-weight: 600; color: #22c55e;"><i class="fa-solid fa-circle-check"></i> Step 5: 正常回答</p>
                <div class="code-block" style="font-size: 15px; background: #14532d; max-height: 280px;">
根据公司规定，年假政策如下：

**年假天数**（参考资料1）：
- 入职满1年：5天
- 入职满3年：10天
- 入职满5年：15天

**申请流程**（参考资料2）：
- 需提前3个工作日申请
- 经直属领导批准后生效
- 未休年假不可跨年累积</div>
            </div>
            <div>
                <p style="font-size: 16px; font-weight: 600; color: #ef4444;"><i class="fa-solid fa-circle-xmark"></i> 无法回答时的预期输出</p>
                <p style="font-size: 14px; color: #64748b;">用户问题："年假可以折算成工资吗？"</p>
                <div class="code-block" style="font-size: 15px; background: #7f1d1d; max-height: 200px;">
根据现有资料无法回答这个问题。

现有资料只包含年假天数和申请流程的规定，
未涉及年假折算工资的政策。
建议您咨询HR部门获取详细信息。</div>
                <div class="callout" style="margin-top: 20px;">
                    <strong>关键：</strong> 通过规则约束，让模型在资料不足时主动承认，而不是编造答案。
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 16: 方法5 - RAG 多层目录检索 ==================== -->
<div class="slide-container" id="slide16" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">6.5 RAG 多层目录检索</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <p>模拟人类查资料的方式，适用于多知识库路由（多个独立知识库接入同一个 RAG）：</p>
        <div class="callout-blue" style="margin: 15px 0; text-align: center; font-size: 18px;">
            <strong>类别 → 目录 → 概要 → 内容 → 深度检索</strong>
        </div>
        <div class="two-column" style="gap: 30px;">
            <div>
                <p style="font-size: 14px; font-weight: 600; color: #334155;">与普通 RAG 的区别：</p>
                <ul class="feature-list" style="font-size: 14px;">
                    <li><strong>普通 RAG：</strong>直接向量检索全部文档 → 容易召回不相关内容</li>
                    <li><strong>多层目录：</strong>先定位知识库 → 再检索具体内容 → 更精准</li>
                </ul>
                <p style="font-size: 14px; font-weight: 600; color: #334155; margin-top: 20px;">示例：企业多部门知识库</p>
                <div class="code-block" style="font-size: 14px; max-height: 220px;">
用户问题："出差报销的流程是什么？"

【知识库结构】
├── HR知识库
│   ├── 招聘制度
│   ├── 薪酬福利
│   └── 假期管理
├── 财务知识库
│   ├── 报销制度      ← 目标
│   ├── 预算管理
│   └── 发票规范
├── IT知识库
│   └── ...
└── 行政知识库
    └── ...</div>
            </div>
            <div>
                <p style="font-size: 14px; font-weight: 600; color: #334155;">Step 1: 类别路由（LLM判断）</p>
                <div class="code-block" style="font-size: 13px; max-height: 150px; margin-bottom: 15px;">
【Prompt】
根据用户问题，判断应该查询哪个知识库。
可选知识库：
- HR知识库：招聘、薪酬、假期、员工关系
- 财务知识库：报销、预算、发票、付款
- IT知识库：系统操作、权限、故障
- 行政知识库：办公用品、会议室、车辆

用户问题：出差报销的流程是什么？
请只输出知识库名称。

→ LLM 输出：财务知识库</div>
                <p style="font-size: 14px; font-weight: 600; color: #334155;">Step 2-3: 目录检索 + 概要确认</p>
                <div class="code-block" style="font-size: 13px; max-height: 120px;">
在财务知识库中检索，匹配到"报销制度"目录。

报销制度目录概要：
- 日常费用报销流程
- 出差报销流程及标准    ← 相关
- 招待费报销规定
- 报销单填写规范</div>
            </div>
        </div>
        <p style="text-align: center; margin-top: 15px; font-size: 15px; color: #6366f1; font-weight: 600;">优势：当知识库很多、内容很杂时，先路由再检索可以大幅提高准确率，避免跨领域的错误召回。</p>
    </div>
</div>

<!-- ==================== Slide 17: 方法6 - Few-shot ==================== -->
<div class="slide-container" id="slide17" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">6.6 示例驱动（Few-shot Engineering）</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <p><strong>优质示例的标准：</strong>✔ 简短  ✔ 清晰  ✔ 风格一致  ✔ <span style="color: #22c55e; font-weight: bold;">全都为正面示例</span></p>
        <div class="callout" style="margin: 15px 0;">
            <strong>禁止事项请单独列出，不要混在示例里！</strong>
        </div>
        <div class="two-column" style="gap: 30px;">
            <div style="background: #fff1f2; padding: 25px; border-radius: 12px; border: 1px solid #fda4af;">
                <h3 style="color: #be123c; font-size: 18px;"><i class="fa-solid fa-circle-xmark"></i> 错误做法（混入反面示例）</h3>
                <div class="code-block" style="background: #7f1d1d; font-size: 15px; max-height: 220px;">
正确示例：
- 输入："这个产品太棒了！" → 输出：正面
- 输入："物流很快，质量不错" → 输出：正面

错误示例（不要这样输出）：
- 输入："还行吧" → 输出：正面  ← 这是错的，应该是中性
- 输入："不好用" → 输出：正面  ← 这是错的，应该是负面</div>
                <p style="font-size: 14px; margin-top: 15px; color: #be123c;"><strong>后果：</strong>模型可能会"学到"错误模式，反而增加出错概率。</p>
            </div>
            <div style="background: #f0fdf4; padding: 25px; border-radius: 12px; border: 1px solid #86efac;">
                <h3 style="color: #15803d; font-size: 18px;"><i class="fa-solid fa-circle-check"></i> 正确做法（只给正面示例 + 单独列规则）</h3>
                <div class="code-block" style="background: #14532d; font-size: 15px; max-height: 220px;">
【示例】
- "这个产品太棒了！" → 正面
- "物流很快，质量不错" → 正面
- "还行吧，一般般" → 中性
- "太差了，退货" → 负面

【规则】
- 只输出：正面/中性/负面
- 模棱两可的评价归为中性</div>
                <p style="font-size: 14px; margin-top: 15px; color: #15803d;"><strong>优势：</strong>示例全是正确的，规则单独列出，不会混淆。</p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 18: 新手常见错误 ==================== -->
<div class="slide-container" id="slide18">
    <h2 class="slide-title">7. 新手常见错误</h2>
    <div class="content-area">
        <div class="tiled-grid">
            <div class="tile-item" style="border-left-color: #ef4444;">
                <i class="fa-solid fa-circle-xmark" style="color: #ef4444;"></i>
                <h3 style="font-size: 20px;">1. 提供错误示例</h3>
                <p style="font-size: 16px;">除非你的错误示例非常典型、非常易于大模型理解，否则<strong>不要给错误示例</strong>。模型容易"学坏"。</p>
            </div>
            <div class="tile-item" style="border-left-color: #ef4444;">
                <i class="fa-solid fa-circle-xmark" style="color: #ef4444;"></i>
                <h3 style="font-size: 20px;">2. 上下文太长不总结</h3>
                <p style="font-size: 16px;">导致模型变差（<strong>降智</strong>）。对话完成一个任务就进行总结，如果是新任务请切换全新的会话。</p>
            </div>
            <div class="tile-item" style="border-left-color: #ef4444;">
                <i class="fa-solid fa-circle-xmark" style="color: #ef4444;"></i>
                <h3 style="font-size: 20px;">3. JSON 格式没有给出示例</h3>
                <p style="font-size: 16px;">字段没有给出详细解释，导致模型无法正确理解输出格式。</p>
            </div>
            <div class="tile-item" style="border-left-color: #ef4444;">
                <i class="fa-solid fa-circle-xmark" style="color: #ef4444;"></i>
                <h3 style="font-size: 20px;">4. 没有让大模型帮忙优化 Prompt</h3>
                <p style="font-size: 16px;">人类写的 Prompt 有认知偏差，大模型可能会误会。让大模型<strong>复述你的指令/优化你的 Prompt</strong>，可以消除理解偏差。</p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 19: 工具调用中的 CE ==================== -->
<div class="slide-container" id="slide19" style="padding: 40px;">
    <h2 class="slide-title" style="font-size: 32px;">8. 工具调用中的 CE</h2>
    <div class="content-area" style="justify-content: flex-start;">
        <p>工具调用的提示词需要像写 API 文档一样严谨，核心结构包含四个部分：</p>
        <div class="two-column" style="gap: 30px; margin-top: 15px;">
            <div>
                <h4>① 参数定义（必须清晰）</h4>
                <div class="code-block" style="font-size: 14px; max-height: 100px; margin-bottom: 15px;">
{
  "command": "要执行的命令（必填）",
  "working_dir": "工作目录（可选，默认当前目录）",
  "description": "简短描述命令用途"
}</div>
                <h4>② 功能说明</h4>
                <ul class="feature-list" style="font-size: 14px;">
                    <li>一句话描述工具的核心功能</li>
                    <li>说明适用场景和限制条件</li>
                </ul>
                <h4 style="margin-top: 15px;">③ 执行规则（用 XML 标签分类）</h4>
                <div class="code-block" style="font-size: 14px; max-height: 140px;">
&lt;使用规范&gt;
- 必填参数 vs 可选参数
- 推荐做法 vs 禁止做法
- 异常处理方式
&lt;/使用规范&gt;

&lt;场景分类&gt;
适合场景：长时间运行的服务、监控任务
不适合场景：构建命令、测试命令、短期脚本
&lt;/场景分类&gt;</div>
            </div>
            <div>
                <h4>④ 正反示例</h4>
                <div class="code-block" style="font-size: 14px; max-height: 80px; margin-bottom: 15px;">
✅ 正确：pytest /foo/bar/tests（使用绝对路径）
❌ 错误：cd /foo/bar && pytest tests（依赖目录切换）</div>
                <h4>工具调用 CE 的核心原则</h4>
                <div style="background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #6366f1;">
                    <ol style="margin: 0; padding-left: 20px; font-size: 14px;">
                        <li><strong>参数描述要具体：</strong>每个字段都要说明类型、是否必填、默认值</li>
                        <li><strong>规则要分类组织：</strong>用 XML 标签将不同类型的规则分开</li>
                        <li><strong>给出正反示例：</strong>让模型知道什么是好的、什么是坏的</li>
                        <li><strong>场景要明确：</strong>说清楚什么时候用、什么时候不用</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== Slide 20: 如何在工作中落地 ==================== -->
<div class="slide-container" id="slide20">
    <h2 class="slide-title">9. 如何在工作中落地 CE</h2>
    <div class="content-area">
        <p style="font-size: 20px; margin-bottom: 25px;"><strong>你每天可以立刻使用的做法：</strong></p>
        <div class="tiled-grid">
            <div class="tile-item">
                <i class="fa-solid fa-pen-to-square"></i>
                <h3>1. 任务前花 1 分钟写清楚问题</h3>
                <p>然后让大模型<strong>复述你的指令/优化你的 Prompt</strong>，并让大模型指出描述有歧义/不清晰的地方，然后人工补充并解答疑问。</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-code"></i>
                <h3>2. 输出模板固定化</h3>
                <p>使用 <strong>JSON 格式</strong>输出。这能极大提升后续处理的稳定性。</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-compress"></i>
                <h3>3. 让模型自己总结上下文</h3>
                <p>比如总结 Conversation History 中最重要的信息。完成一个任务后主动要求模型生成"交接文档"，新任务请切换全新会话。</p>
            </div>
            <div class="tile-item">
                <i class="fa-solid fa-list-check"></i>
                <h3>4. 复杂任务使用 Few-shot</h3>
                <p>用高质量示例替代抽象的文字描述（Few-shot 是<strong>正面示例</strong>，不是错误示例）。</p>
            </div>
        </div>
        <div style="margin-top: 30px; padding: 25px; background: #eff6ff; border-radius: 12px; text-align: center;">
            <strong style="color: #1e40af; font-size: 22px;">核心口诀：结构化、示例化、总结化</strong>
        </div>
    </div>
</div>

<!-- ==================== Slide 21: Q & A ==================== -->
<div class="slide-container" id="slide21">
    <div class="content-area" style="text-align: center;">
        <i class="fa-solid fa-layer-group" style="font-size: 80px; color: #6366f1; margin-bottom: 30px;"></i>
        <h2 style="font-size: 60px; margin-bottom: 20px;">Q & A</h2>
        <p style="font-size: 24px; color: #475569;">Context Engineering = Structural Design for Intelligence</p>
        <div style="margin-top: 40px; padding: 25px 50px; background: #eff6ff; border-radius: 12px; display: inline-block; color: #1e40af;">
            <strong style="font-size: 20px;">今天的核心信息：</strong>
            <ul style="text-align: left; margin-top: 15px; font-size: 18px;">
                <li>模型不会思考，只是根据输入去做文字接龙</li>
                <li>Context Engineering 就是设计输入的艺术</li>
                <li>六大方法 + 避开常见坑 = 显著提升效果</li>
            </ul>
        </div>
        <p style="margin-top: 40px; font-size: 20px; color: #64748b;">谢谢大家！</p>
    </div>
</div>

</body>
</html>
